import * as Localization from 'expo-localization';
import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';

const resources = {
  tr: {
    translation: {
      homeTitle: 'Ana Sayfa',
      courses: 'Dersler',
      exams: 'Sınavlar',
      scanner: 'Optik Okuyucu',
      settings: 'Ayarlar',
      resume: 'Devam Et',
      start: 'Başlat',
      download: 'İndir',
      offlineMode: 'Çevrimdışı Mod',
      offlineDescription: 'İçerik çevrimdışı kullanılabilir.',
      notifications: 'Bildirimler',
      enableBiometric: 'Biyometrik Giriş',
      authenticate: 'Doğrula',
      cancel: 'İptal',
      language: 'Dil',
      darkMode: 'Karanlık Mod',
      videoPlayer: 'Video Oynatıcı',
      pdfViewer: 'PDF Görüntüleyici',
      quiz: 'Test',
      timer: 'Geri Sayım',
      antiCheat: 'Anti-Cheat',
      notePlaceholder: 'Bu içerikle ilgili notlarını ekle',
      addNote: 'Not Ekle',
      capture: 'Yakala',
      captureAnother: 'Yeni Sayfa',
      processScan: 'Okumayı İşle',
      exportJson: 'JSON Dışa Aktar',
      confirmResults: 'Sonuçları Onayla',
      detectedBubbles: 'Algılanan İşaretlemeler',
      review: 'İncele',
      pushReady: 'Push bildirime hazır',
      retry: 'Tekrar Dene',
      grantPermission: 'İzin Ver',
      biometricsUnavailable: 'Biyometrik doğrulama kullanılamıyor',
      connectivityLost: 'Bağlantı koptu - çevrimdışı moddasınız',
      connectivityRestored: 'Bağlantı geri geldi',
    },
  },
  en: {
    translation: {
      homeTitle: 'Home',
      courses: 'Courses',
      exams: 'Exams',
      scanner: 'Scanner',
      settings: 'Settings',
      resume: 'Resume',
      start: 'Start',
      download: 'Download',
      offlineMode: 'Offline Mode',
      offlineDescription: 'Content available offline.',
      notifications: 'Notifications',
      enableBiometric: 'Biometric Login',
      authenticate: 'Authenticate',
      cancel: 'Cancel',
      language: 'Language',
      darkMode: 'Dark Mode',
      videoPlayer: 'Video Player',
      pdfViewer: 'PDF Viewer',
      quiz: 'Quiz',
      timer: 'Timer',
      antiCheat: 'Anti-Cheat',
      notePlaceholder: 'Add your note for this content',
      addNote: 'Add Note',
      capture: 'Capture',
      captureAnother: 'Capture Another',
      processScan: 'Process Scan',
      exportJson: 'Export JSON',
      confirmResults: 'Confirm Results',
      detectedBubbles: 'Detected Markings',
      review: 'Review',
      pushReady: 'Push notification ready',
      retry: 'Retry',
      grantPermission: 'Grant Permission',
      biometricsUnavailable: 'Biometrics not available',
      connectivityLost: 'Connection lost - offline mode',
      connectivityRestored: 'Connection restored',
    },
  },
  de: {
    translation: {
      homeTitle: 'Startseite',
      courses: 'Kurse',
      exams: 'Prüfungen',
      scanner: 'Scanner',
      settings: 'Einstellungen',
      resume: 'Fortsetzen',
      start: 'Starten',
      download: 'Herunterladen',
      offlineMode: 'Offline Modus',
      offlineDescription: 'Inhalte sind offline verfügbar.',
      notifications: 'Benachrichtigungen',
      enableBiometric: 'Biometrischer Login',
      authenticate: 'Authentifizieren',
      cancel: 'Abbrechen',
      language: 'Sprache',
      darkMode: 'Dunkler Modus',
      videoPlayer: 'Videoplayer',
      pdfViewer: 'PDF Viewer',
      quiz: 'Test',
      timer: 'Countdown',
      antiCheat: 'Anti-Cheat',
      notePlaceholder: 'Notizen zu diesem Inhalt',
      addNote: 'Notiz hinzufügen',
      capture: 'Aufnehmen',
      captureAnother: 'Weitere Seite',
      processScan: 'Scan Verarbeiten',
      exportJson: 'JSON Exportieren',
      confirmResults: 'Ergebnisse bestätigen',
      detectedBubbles: 'Erkannte Markierungen',
      review: 'Prüfen',
      pushReady: 'Push-Benachrichtigung bereit',
      retry: 'Erneut versuchen',
      grantPermission: 'Berechtigung erteilen',
      biometricsUnavailable: 'Biometrie nicht verfügbar',
      connectivityLost: 'Verbindung verloren - offline',
      connectivityRestored: 'Verbindung wiederhergestellt',
    },
  },
};

if (!i18n.isInitialized) {
  i18n.use(initReactI18next).init({
    resources,
    lng: Localization.getLocales()[0]?.languageCode ?? 'en',
    fallbackLng: 'en',
    interpolation: {
      escapeValue: false,
    },
  });
}

export const supportedLanguages = [
  { code: 'tr', label: 'Türkçe' },
  { code: 'en', label: 'English' },
  { code: 'de', label: 'Deutsch' },
];

export default i18n;
